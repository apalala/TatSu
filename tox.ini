[tox]
envlist = py27, py35, py36, pypy, cython

[testenv]
whitelist_externals =
    echo
    rm

commands =
    flake8
    py.test

    # Test for issue #62.
    python -m tatsu --outfile test/issue_62_test_parser.py test/issue_62_test_ebnf.txt
    python test/issue_62_test_parser.py test/issue_62_test_input.txt
    rm -rf test/issue_62_test_parser.py

deps =
    flake8
    pytest


[testenv:py35]
commands =
    flake8
    mypy . --ignore-missing-imports
    mypy . --py2 --ignore-missing-imports
    py.test

deps =
    flake8
    mypy
    pytest

[testenv:py36]
commands =
    flake8
    mypy . --ignore-missing-imports
    mypy . --py2 --ignore-missing-imports
    py.test

deps =
    flake8
    mypy
    pytest

[testenv:cython]
commands =
    flake8
    py.test

deps =
    cython
    pytest
    flake8

[flake8]
ignore = N802
max-line-length = 200
exclude =
    parsers,
    docs,
    build,
    tmp,
    .tox,
    .ropeproject,
    *.egg,
    *.egg-info,

[pytest]
addopts =
    --disable-pytest-warnings
    -W ignore
# addopts = --verbose
norecursedirs =
    .ropeproject
    .tox
    parsers
    docs
    build
    tmp
